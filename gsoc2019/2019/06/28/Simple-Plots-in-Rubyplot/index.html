<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Simple Plots in Rubyplot | Alish Dipani </title> <meta name="author" content="Alish Dipani"> <meta name="description" content="A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design. "> <meta name="keywords" content="neuro-ai, computational-cognitive-neuroscience, vision-science"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://alishdipani.github.io/gsoc2019/2019/06/28/Simple-Plots-in-Rubyplot/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Alish</span> Dipani </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">Home </a> </li> <li class="nav-item "> <a class="nav-link" href="/journals/">Journals </a> </li> <li class="nav-item "> <a class="nav-link" href="/conferences/">Conferences </a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">Teaching </a> </li> <li class="nav-item "> <a class="nav-link" href="/awards/">Awards </a> </li> <li class="nav-item "> <a class="nav-link" href="/service/">Service </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">Blog </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">More </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/invited-talks/">Invited Talks</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/experience/">Experience</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/open-source/">Open-source</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Simple Plots in Rubyplot</h1> <p class="post-meta"> Created in June 28, 2019 </p> <p class="post-tags"> <i class="fa-solid fa-calendar fa-sm"></i> 2019   ·   <i class="fa-solid fa-hashtag fa-sm"></i> gsoc2019,   <i class="fa-solid fa-hashtag fa-sm"></i> rubyplot </p> </header> <article class="post-content"> <div id="markdown-content"> <p>Summary: Simple plots in Rubyplot.</p> <p><strong>Table of Contents</strong></p> <ul id="markdown-toc"> <li><a href="#introduction" id="markdown-toc-introduction">Introduction</a></li> <li><a href="#scatter-plot" id="markdown-toc-scatter-plot">Scatter plot</a></li> <li><a href="#area-plot" id="markdown-toc-area-plot">Area plot</a></li> <li><a href="#bar-plot" id="markdown-toc-bar-plot">Bar plot</a></li> <li><a href="#bubble-plot" id="markdown-toc-bubble-plot">Bubble plot</a></li> <li><a href="#candle-stick-plot" id="markdown-toc-candle-stick-plot">Candle-stick plot</a></li> <li><a href="#histogram" id="markdown-toc-histogram">Histogram</a></li> <li><a href="#line-plot" id="markdown-toc-line-plot">Line plot</a></li> <li><a href="#error-bar-plot" id="markdown-toc-error-bar-plot">Error-bar plot</a></li> <li><a href="#box-plot" id="markdown-toc-box-plot">Box plot</a></li> </ul> <h1 id="introduction">Introduction</h1> <p>This blog lists down the simple plots in Rubyplot with ImageMagick as backend and highlights the work done in Week 3 and 4 for GSoC 2019.<br> P.S. - The version of Rubyplot used in this blog is dated 28th June.</p> <h1 id="scatter-plot">Scatter plot</h1> <p>An example of Scatter plot with code is:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="vi">@x1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="vi">@y1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">33</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">65</span><span class="p">]</span>
<span class="vi">@figure</span> <span class="o">=</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Figure</span><span class="p">.</span><span class="nf">new</span>
<span class="n">axes</span> <span class="o">=</span> <span class="vi">@figure</span><span class="p">.</span><span class="nf">add_subplot!</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">scatter!</span> <span class="k">do</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">data</span> <span class="vi">@x1</span><span class="p">,</span> <span class="vi">@y1</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">label</span> <span class="o">=</span> <span class="s2">"data1"</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">marker_size</span> <span class="o">=</span> <span class="mi">3</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">marker_fill_color</span> <span class="o">=</span> <span class="ss">:blue</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">marker_type</span> <span class="o">=</span> <span class="ss">:diagonal_cross</span>
<span class="k">end</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">title</span> <span class="o">=</span> <span class="s2">"Scatter plot"</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">x_title</span> <span class="o">=</span> <span class="s2">"X data"</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">y_title</span> <span class="o">=</span> <span class="s2">"Y data"</span>
<span class="vi">@figure</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s1">'scatterplot.png'</span><span class="p">)</span>
</code></pre></div></div> <p><img src="https://raw.githubusercontent.com/alishdipani/alishdipani.github.io/master/_posts/Resources/Simple_Plots_in_Rubyplot/scatterplot.png" width="600"></p> <p>The scatter plot draws markers at the position specified by the user, the inputs taken are the X and Y coordinates for the markers (<code class="language-plaintext highlighter-rouge">data</code>), the label(<code class="language-plaintext highlighter-rouge">label</code>) for this plot, size of the marker (<code class="language-plaintext highlighter-rouge">marker_size</code>), type of the marker (<code class="language-plaintext highlighter-rouge">marker_type</code>), colour of the border of the marker (<code class="language-plaintext highlighter-rouge">marker_border_color</code>) and colour to be filled inside the marker (<code class="language-plaintext highlighter-rouge">marker_fill_color</code>).<br> If the marker does not have a fill colour (example - plus, diagonal cross, dot) then the fill colour is set as the colour of the colour of the marker.</p> <p><strong>draw</strong> function for scatter plot is:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">draw</span>
  <span class="vi">@marker_fill_color</span> <span class="o">=</span> <span class="ss">:default</span> <span class="k">if</span> <span class="vi">@marker_fill_color</span><span class="p">.</span><span class="nf">nil?</span>
  <span class="no">Rubyplot</span><span class="p">.</span><span class="nf">backend</span><span class="p">.</span><span class="nf">draw_markers</span><span class="p">(</span>
    <span class="ss">x: </span><span class="vi">@data</span><span class="p">[</span><span class="ss">:x_values</span><span class="p">],</span>
    <span class="ss">y: </span><span class="vi">@data</span><span class="p">[</span><span class="ss">:y_values</span><span class="p">],</span>
    <span class="ss">type: </span><span class="vi">@marker_type</span><span class="p">,</span>
    <span class="ss">fill_color: </span><span class="vi">@marker_fill_color</span><span class="p">,</span>
    <span class="ss">border_color: </span><span class="vi">@marker_border_color</span><span class="p">,</span>
    <span class="ss">size: </span><span class="p">[</span><span class="vi">@marker_size</span><span class="p">]</span> <span class="o">*</span> <span class="vi">@data</span><span class="p">[</span><span class="ss">:x_values</span><span class="p">].</span><span class="nf">size</span>
  <span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div> <p>Here, first the marker fill colour is set to default colour if it is <code class="language-plaintext highlighter-rouge">nil</code> the the <strong>draw_markers</strong> function is called:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">draw_markers</span><span class="p">(</span><span class="n">x</span><span class="p">:,</span> <span class="n">y</span><span class="p">:,</span> <span class="ss">type: :default</span><span class="p">,</span> <span class="ss">fill_color: :default</span><span class="p">,</span> <span class="ss">border_color: :default</span><span class="p">,</span> <span class="ss">size: </span><span class="kp">nil</span><span class="p">)</span>
  <span class="n">y</span><span class="p">.</span><span class="nf">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">iy</span><span class="p">,</span> <span class="n">idx_y</span><span class="o">|</span>
    <span class="n">ix</span> <span class="o">=</span> <span class="n">transform_x</span><span class="p">(</span><span class="ss">x: </span><span class="n">x</span><span class="p">[</span><span class="n">idx_y</span><span class="p">],</span><span class="ss">abs: </span><span class="kp">false</span><span class="p">)</span>
    <span class="n">iy</span> <span class="o">=</span> <span class="n">transform_y</span><span class="p">(</span><span class="ss">y: </span><span class="n">iy</span><span class="p">,</span> <span class="ss">abs: </span><span class="kp">false</span><span class="p">)</span>
    <span class="c1"># in GR backend size is multiplied by</span>
    <span class="c1"># nominal size generated on the graphics device</span>
    <span class="c1"># so set the nominal_factor to 15</span>
    <span class="n">within_window</span> <span class="k">do</span>
      <span class="n">size</span><span class="p">[</span><span class="n">idx_y</span><span class="p">]</span> <span class="o">*=</span> <span class="no">NOMINAL_FACTOR_MARKERS</span>
      <span class="no">MARKER_TYPES</span><span class="p">[</span><span class="n">type</span><span class="p">].</span><span class="nf">call</span><span class="p">(</span><span class="vi">@draw</span><span class="p">,</span> <span class="n">ix</span><span class="p">,</span> <span class="n">iy</span><span class="p">,</span> <span class="n">fill_color</span><span class="p">,</span> <span class="n">border_color</span><span class="p">,</span> <span class="n">size</span><span class="p">[</span><span class="n">idx_y</span><span class="p">])</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div> <p>The coordinates are first transformed, then the size of the marker is multiplied by a nominal factor (hardcoded to 15) to match the marker sizes in GR backend as GR backend multiplies its marker sizes by a nominal factor which is not mentioned.<br> To draw the markers, a hash is used which has lambdas for drawing different types of markers, an example of the hash is:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">MARKER_TYPES</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1"># Default type is circle</span>
  <span class="c1"># Stroke width is set to 1</span>
  <span class="ss">default: </span><span class="o">-&gt;</span><span class="p">(</span><span class="n">draw</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">fill_color</span><span class="p">,</span> <span class="n">border_color</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">draw</span><span class="p">.</span><span class="nf">stroke</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Color</span><span class="o">::</span><span class="no">COLOR_INDEX</span><span class="p">[</span><span class="n">border_color</span><span class="p">]</span>
    <span class="n">draw</span><span class="p">.</span><span class="nf">fill</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Color</span><span class="o">::</span><span class="no">COLOR_INDEX</span><span class="p">[</span><span class="n">fill_color</span><span class="p">]</span>
    <span class="n">draw</span><span class="p">.</span><span class="nf">circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">size</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="ss">circle: </span><span class="o">-&gt;</span><span class="p">(</span><span class="n">draw</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">fill_color</span><span class="p">,</span> <span class="n">border_color</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">draw</span><span class="p">.</span><span class="nf">stroke</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Color</span><span class="o">::</span><span class="no">COLOR_INDEX</span><span class="p">[</span><span class="n">border_color</span><span class="p">]</span>
    <span class="n">draw</span><span class="p">.</span><span class="nf">fill</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Color</span><span class="o">::</span><span class="no">COLOR_INDEX</span><span class="p">[</span><span class="n">fill_color</span><span class="p">]</span>
    <span class="n">draw</span><span class="p">.</span><span class="nf">circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">size</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
  <span class="p">},</span>
  <span class="ss">plus: </span><span class="o">-&gt;</span><span class="p">(</span><span class="n">draw</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">fill_color</span><span class="p">,</span> <span class="n">border_color</span><span class="p">,</span> <span class="n">size</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1"># size is length of one line</span>
    <span class="n">draw</span><span class="p">.</span><span class="nf">stroke</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Color</span><span class="o">::</span><span class="no">COLOR_INDEX</span><span class="p">[</span><span class="n">fill_color</span><span class="p">]</span>
    <span class="n">draw</span><span class="p">.</span><span class="nf">line</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">size</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="n">size</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
    <span class="n">draw</span><span class="p">.</span><span class="nf">line</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="n">size</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">size</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="c1"># Rest of the code omitted due to space constraint</span>
<span class="p">}</span>
</code></pre></div></div> <p>Each of these lambdas take the properties of the marker and draw it depending on the type of marker, for example the <code class="language-plaintext highlighter-rouge">circle</code> type draws a circle with size as its radius, the <code class="language-plaintext highlighter-rouge">plus</code> type draws two perpendicular lines in the shape of a plus sign (+) with the size as length of the lines.<br> A hash of lambdas is used instead of making a module or a class to avoid inconsistencies in backends as GR does not require functions for creating marker types and only requires the type of the marker, i.e. its internal functions take care of drawing the marker types. Also, generally Hashes are much faster than functions and hence hashes are preferred over a module or a class.</p> <p>Marker types implemented till now for ImageMagick bacckend are: circle, plus, dot, diagonal_cross, solid_circle, traingle_down, solid_traingle_down, traingle_up, solid_traingle_up, square, solid_square, bowtie, solid_bowtie, hglass, solid_hglass, diamond, solid_diamond, solid_tri_right, solid_tri_left, hollow_plus, solid_plus, vline, hline, omark.</p> <p>Marker types not yet implemented for ImageMagick backend are: star, solid_star, asterisk, tri_up_down, pentagon, hexagon, heptagon, octagon, star_4, star_5, star_6, star_7, star_8.</p> <h1 id="area-plot">Area plot</h1> <p>An example of Area plot with code is:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="vi">@figure</span> <span class="o">=</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Figure</span><span class="p">.</span><span class="nf">new</span>
<span class="n">axes</span> <span class="o">=</span> <span class="vi">@figure</span><span class="p">.</span><span class="nf">add_subplot!</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">area!</span> <span class="k">do</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">data</span> <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">86</span><span class="p">,</span> <span class="mi">39</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">79</span><span class="p">,</span> <span class="mi">88</span><span class="p">]</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">label</span> <span class="o">=</span> <span class="s2">"Jimmy"</span>
<span class="k">end</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">title</span> <span class="o">=</span> <span class="s2">"Area plot"</span>
<span class="vi">@figure</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s1">'areaplot.png'</span><span class="p">)</span>
</code></pre></div></div> <p><img src="https://raw.githubusercontent.com/alishdipani/alishdipani.github.io/master/_posts/Resources/Simple_Plots_in_Rubyplot/areaplot.png" width="600"></p> <p>The area plot draws a line passing through the points given as the input and colours the area covered under this line.<br> The inputs taken are the data as a compulsory array containing Y coordinate values of the points and an optional array containing X coordinate values of the points(<code class="language-plaintext highlighter-rouge">data</code>), the label of the plot(<code class="language-plaintext highlighter-rouge">label</code>) and the color of the plot(<code class="language-plaintext highlighter-rouge">color</code>).</p> <p>If only one set of values is given to the area plot as the data, for example only [30, 36, 86, 39, 27, 31, 79, 88] is given then this set is considered as a set of Y coordinates of the points and X coordinates are set as 0, 1, 2 … (size of y values - 1) i.e. the coordinates are (0, 30), (1, 36), (2, 86), (3, 39), (4, 27), (5, 31), (6, 79), (7, 88).</p> <p>Now, this is the list of coordinates through which the line has to pass and the area under the curve is to be filled, but to draw this a polygon is needed in which the colour will be filled. TO create this polygon, we just need to append the starting point and end point of the X axis so that the polygon is completed. So, here in the example taken above the starting point of X axis is (minimum x value, minimum y value) i.e. (0, 27) and the end point of X axis is (maximum x value, minimum y value) i.e. (7, 27).<br> So, finally the coordinates for the polygon are (0, 30), (1, 36), (2, 86), (3, 39), (4, 27), (5, 31), (6, 79), (7, 88), (0, 27), (7, 27).<br> The code for appending these points is:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">x_poly_points</span> <span class="o">=</span> <span class="vi">@data</span><span class="p">[</span><span class="ss">:x_values</span><span class="p">].</span><span class="nf">concat</span><span class="p">([</span><span class="vi">@axes</span><span class="p">.</span><span class="nf">x_axis</span><span class="p">.</span><span class="nf">max_val</span><span class="p">,</span> <span class="vi">@axes</span><span class="p">.</span><span class="nf">x_axis</span><span class="p">.</span><span class="nf">min_val</span><span class="p">])</span>
<span class="n">y_poly_points</span> <span class="o">=</span> <span class="vi">@data</span><span class="p">[</span><span class="ss">:y_values</span><span class="p">].</span><span class="nf">concat</span><span class="p">([</span><span class="vi">@axes</span><span class="p">.</span><span class="nf">y_axis</span><span class="p">.</span><span class="nf">min_val</span><span class="p">,</span> <span class="vi">@axes</span><span class="p">.</span><span class="nf">y_axis</span><span class="p">.</span><span class="nf">min_val</span><span class="p">])</span>
</code></pre></div></div> <p>The opacity of the polygon i.e. the area under the curve is set to <strong>0.3</strong> to make the areas behind an area visible.<br> After this, a <code class="language-plaintext highlighter-rouge">Rubyplot::Artist::Polygon</code> object is created whhich uses the <code class="language-plaintext highlighter-rouge">draw_polygon</code> backend function to draw the polygon, the <code class="language-plaintext highlighter-rouge">draw_polygon</code> function is:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">draw_polygon</span><span class="p">(</span><span class="n">x</span><span class="p">:,</span> <span class="n">y</span><span class="p">:,</span> <span class="n">border_width</span><span class="p">:,</span> <span class="n">border_type</span><span class="p">:,</span> <span class="n">border_color</span><span class="p">:,</span> <span class="n">fill_color</span><span class="p">:,</span>
  <span class="n">fill_opacity</span><span class="p">:)</span>
  <span class="n">within_window</span> <span class="k">do</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">map!</span> <span class="p">{</span> <span class="o">|</span><span class="n">ix</span><span class="o">|</span> <span class="n">transform_x</span><span class="p">(</span><span class="ss">x: </span><span class="n">ix</span><span class="p">,</span> <span class="ss">abs: </span><span class="kp">false</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">y</span><span class="p">.</span><span class="nf">map!</span> <span class="p">{</span> <span class="o">|</span><span class="n">iy</span><span class="o">|</span> <span class="n">transform_y</span><span class="p">(</span><span class="ss">y: </span><span class="n">iy</span><span class="p">,</span> <span class="ss">abs: </span><span class="kp">false</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">coords</span> <span class="o">=</span> <span class="n">x</span><span class="p">.</span><span class="nf">zip</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
    <span class="vi">@draw</span><span class="p">.</span><span class="nf">stroke_width</span> <span class="n">border_width</span>
    <span class="vi">@draw</span><span class="p">.</span><span class="nf">stroke</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Color</span><span class="o">::</span><span class="no">COLOR_INDEX</span><span class="p">[</span><span class="n">border_color</span><span class="p">]</span>
    <span class="vi">@draw</span><span class="p">.</span><span class="nf">fill</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Color</span><span class="o">::</span><span class="no">COLOR_INDEX</span><span class="p">[</span><span class="n">fill_color</span><span class="p">]</span>
    <span class="vi">@draw</span><span class="p">.</span><span class="nf">fill_opacity</span> <span class="n">fill_opacity</span>
    <span class="vi">@draw</span><span class="p">.</span><span class="nf">polygon</span> <span class="o">*</span><span class="n">coords</span><span class="p">.</span><span class="nf">flatten</span>
    <span class="vi">@draw</span><span class="p">.</span><span class="nf">fill_opacity</span> <span class="mi">1</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div> <p>Thsi function first transforms the coordiantes and then combines the coordiantes which were two different sets before (x values = [0, 1, 2, 3, 4, 5, 6, 7, 0, 7] and y values = [30, 36, 86, 39, 27, 31, 79, 88, 27, 27]), the <code class="language-plaintext highlighter-rouge">zip</code> Ruby function is used to combine the points (now coords = [[0, 30], [1, 36], [2, 86], [3, 39], [4, 27], [5, 31], [6, 79], [7, 88], [0, 27], [7, 27]]). After this the properties of the polygon are set and the coordinates are given as an input to the polygon function of rmagick, but first the coordiantes array is flattened (now coords = [0, 30, 1, 36, 2, 86, 3, 39, 4, 27, 5, 31, 6, 79, 7, 88, 0, 27, 7, 27]) so that input is converted into the way that polygon function accepts, the splat operator (*) is used to give the coords array as an argument to the function. Finally, the opacity of <code class="language-plaintext highlighter-rouge">Magick::Draw</code> object is set again to 1 (initial value).</p> <h1 id="bar-plot">Bar plot</h1> <p>An example of Bar plot with code is:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="vi">@figure</span> <span class="o">=</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Figure</span><span class="p">.</span><span class="nf">new</span>
<span class="n">axes</span> <span class="o">=</span> <span class="vi">@figure</span><span class="p">.</span><span class="nf">add_subplot!</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">bar!</span> <span class="k">do</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">data</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">]</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">label</span> <span class="o">=</span> <span class="s2">"data1"</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">color</span> <span class="o">=</span> <span class="ss">:neon_red</span>
<span class="k">end</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">title</span> <span class="o">=</span> <span class="s2">"Bar plot"</span>
<span class="vi">@figure</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s1">'barplot.png'</span><span class="p">)</span>
</code></pre></div></div> <p><img src="https://raw.githubusercontent.com/alishdipani/alishdipani.github.io/master/_posts/Resources/Simple_Plots_in_Rubyplot/barplot.png" width="600"></p> <p>The bar plot draws bars which are rectangles with heights as the data given as the input.<br> Th inputs taken are the color of the bars(<code class="language-plaintext highlighter-rouge">color</code>), the label of the plot(<code class="language-plaintext highlighter-rouge">label</code>), the data which is a single array for the sizes of the bars representing the Y values of the bars(<code class="language-plaintext highlighter-rouge">data</code>) and the space between the bars as a ratio(<code class="language-plaintext highlighter-rouge">spacing_ratio</code>) i.e. the range is [0,1] where 0 represents no space between the bars and 1 represents maximum space between the bars which is equivalent to the maximum space alloted to a bar i.e. (total X range / number of bars).<br> The X values for the coordinates are set as 0,1,…number of Y values i.e. in this example when the data is given as [5,12,9,6,7], the coordinates for the bars are (0,5), (1,12), (2,9), (3,6) and (4,7) respectively.</p> <p>Now, the bars are rectangles which are stored in the <code class="language-plaintext highlighter-rouge">rectangles</code> array, the X and Y coordinates of lower left corner of these rectangles are stored in <code class="language-plaintext highlighter-rouge">abs_x_left</code> and <code class="language-plaintext highlighter-rouge">abs_y_left</code> respectively. The upper right corner coordinates are calculated by adding the width of the bar to the X coordinate of the lower left corner and seeting the Y coordinate to the height of the bar as set in the <code class="language-plaintext highlighter-rouge">data</code> by the user.<br> This is done when <strong>draw</strong> is called which calls the <strong>setup_bar_rectangles</strong> function:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">draw</span>
  <span class="n">setup_bar_rectangles</span>
  <span class="vi">@rectangles</span><span class="p">.</span><span class="nf">each</span><span class="p">(</span><span class="o">&amp;</span><span class="ss">:draw</span><span class="p">)</span>
<span class="k">end</span>

<span class="k">def</span> <span class="nf">setup_bar_rectangles</span>
<span class="vi">@data</span><span class="p">[</span><span class="ss">:y_values</span><span class="p">].</span><span class="nf">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">iy</span><span class="p">,</span> <span class="n">i</span><span class="o">|</span>
  <span class="vi">@rectangles</span> <span class="o">&lt;&lt;</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Artist</span><span class="o">::</span><span class="no">Rectangle</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>
    <span class="nb">self</span><span class="p">,</span>
    <span class="ss">x1: </span><span class="vi">@abs_x_left</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
    <span class="ss">y1: </span><span class="vi">@abs_y_left</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
    <span class="ss">x2: </span><span class="vi">@abs_x_left</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="vi">@bar_width</span><span class="p">,</span>
    <span class="ss">y2: </span><span class="n">iy</span><span class="p">,</span>
    <span class="ss">border_color: </span><span class="vi">@data</span><span class="p">[</span><span class="ss">:color</span><span class="p">],</span>
    <span class="ss">fill_color: </span><span class="vi">@data</span><span class="p">[</span><span class="ss">:color</span><span class="p">]</span>
  <span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div> <p>This calculation of <code class="language-plaintext highlighter-rouge">abs_x_left</code> and <code class="language-plaintext highlighter-rouge">abs_y_left</code> is done by the multibars code which will be explained in the next blog.</p> <p>The <strong>draw</strong> function of the <code class="language-plaintext highlighter-rouge">Ractangle</code> object is:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">draw</span>
  <span class="no">Rubyplot</span><span class="p">.</span><span class="nf">backend</span><span class="p">.</span><span class="nf">draw_rectangle</span><span class="p">(</span>
    <span class="ss">x1: </span><span class="vi">@x1</span><span class="p">,</span>
    <span class="ss">y1: </span><span class="vi">@y1</span><span class="p">,</span>
    <span class="ss">x2: </span><span class="vi">@x2</span><span class="p">,</span>
    <span class="ss">y2: </span><span class="vi">@y2</span><span class="p">,</span>
    <span class="ss">border_color: </span><span class="vi">@border_color</span><span class="p">,</span>
    <span class="ss">fill_color: </span><span class="vi">@fill_color</span><span class="p">,</span>
    <span class="ss">abs: </span><span class="vi">@abs</span>
  <span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div> <p>It calls the <strong>draw_rectangle</strong> backend function and passes the information about the rectangle:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">draw_rectangle</span><span class="p">(</span><span class="n">x1</span><span class="p">:,</span><span class="n">y1</span><span class="p">:,</span><span class="n">x2</span><span class="p">:,</span><span class="n">y2</span><span class="p">:,</span> <span class="ss">border_color: :default</span><span class="p">,</span>
  <span class="ss">fill_color: </span><span class="kp">nil</span><span class="p">,</span> <span class="ss">border_width: </span><span class="mi">1</span><span class="p">,</span> <span class="ss">border_type: </span><span class="kp">nil</span><span class="p">,</span> <span class="ss">abs: </span><span class="kp">false</span><span class="p">)</span>
  <span class="n">within_window</span><span class="p">(</span><span class="n">abs</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">x1</span> <span class="o">=</span> <span class="n">transform_x</span><span class="p">(</span><span class="ss">x: </span><span class="n">x1</span><span class="p">,</span> <span class="ss">abs: </span><span class="n">abs</span><span class="p">)</span>
    <span class="n">x2</span> <span class="o">=</span> <span class="n">transform_x</span><span class="p">(</span><span class="ss">x: </span><span class="n">x2</span><span class="p">,</span> <span class="ss">abs: </span><span class="n">abs</span><span class="p">)</span>
    <span class="n">y1</span> <span class="o">=</span> <span class="n">transform_y</span><span class="p">(</span><span class="ss">y: </span><span class="n">y1</span><span class="p">,</span> <span class="ss">abs: </span><span class="n">abs</span><span class="p">)</span>
    <span class="n">y2</span> <span class="o">=</span> <span class="n">transform_y</span><span class="p">(</span><span class="ss">y: </span><span class="n">y2</span><span class="p">,</span> <span class="ss">abs: </span><span class="n">abs</span><span class="p">)</span>

    <span class="vi">@draw</span><span class="p">.</span><span class="nf">stroke</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Color</span><span class="o">::</span><span class="no">COLOR_INDEX</span><span class="p">[</span><span class="n">border_color</span><span class="p">]</span>
    <span class="vi">@draw</span><span class="p">.</span><span class="nf">fill</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Color</span><span class="o">::</span><span class="no">COLOR_INDEX</span><span class="p">[</span><span class="n">fill_color</span><span class="p">]</span> <span class="k">if</span> <span class="n">fill_color</span>
    <span class="vi">@draw</span><span class="p">.</span><span class="nf">stroke_width</span> <span class="n">border_width</span><span class="p">.</span><span class="nf">to_f</span>
    <span class="c1"># if fill_color is not given, the rectangle fill colour is transparent</span>
    <span class="c1"># i.e. only edges are visible</span>
    <span class="vi">@draw</span><span class="p">.</span><span class="nf">fill_opacity</span> <span class="mi">0</span> <span class="k">unless</span> <span class="n">fill_color</span>
    <span class="vi">@draw</span><span class="p">.</span><span class="nf">rectangle</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span>
    <span class="vi">@draw</span><span class="p">.</span><span class="nf">fill_opacity</span> <span class="mi">1</span> <span class="k">unless</span> <span class="n">fill_color</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div> <p>Here, first the coordinates are transformed and then the properties of the rectangle are set and if <code class="language-plaintext highlighter-rouge">fill_color</code> is not given then a hollow rectangle is drawn by setting the <code class="language-plaintext highlighter-rouge">fill_opacity</code> to 0. Finally, <code class="language-plaintext highlighter-rouge">Magick::Draw</code>’s <strong>rectangle</strong> function is used to draw the rectangle. If the fill_color is not given then the <code class="language-plaintext highlighter-rouge">fill_opacity</code> is reset to 1.</p> <h1 id="bubble-plot">Bubble plot</h1> <p>An example of Bubble plot with code is:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="vi">@figure</span> <span class="o">=</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Figure</span><span class="p">.</span><span class="nf">new</span>
<span class="n">axes</span> <span class="o">=</span> <span class="vi">@figure</span><span class="p">.</span><span class="nf">add_subplot!</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">bubble!</span> <span class="k">do</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">data</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">23</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">35</span><span class="p">,</span> <span class="mi">21</span><span class="p">,</span> <span class="mi">23</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mf">4.5</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.1</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">]</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">label</span> <span class="o">=</span> <span class="s2">"apples"</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">color</span> <span class="o">=</span> <span class="ss">:blue</span>
<span class="k">end</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">x_range</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">40</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">y_range</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">40</span><span class="p">,</span> <span class="mi">25</span><span class="p">]</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">title</span> <span class="o">=</span> <span class="s2">"simple bubble plot."</span>
<span class="vi">@figure</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s1">'bubbleplot.png'</span><span class="p">)</span>
</code></pre></div></div> <p><img src="https://raw.githubusercontent.com/alishdipani/alishdipani.github.io/master/_posts/Resources/Simple_Plots_in_Rubyplot/bubbleplot.png" width="600"></p> <p>The bubble plot draws circles with the size and the coordinates as specified by the user.<br> The inputs taken are the data which consists of three arrays for X coordinates, Y coordinates and the sizes of the bubbles respectively(<code class="language-plaintext highlighter-rouge">data</code>), the label of the plot(<code class="language-plaintext highlighter-rouge">label</code>) and the color of the bubbles(<code class="language-plaintext highlighter-rouge">color</code>).</p> <p>In this example the X,Y coordinates and sizes for the bubbles respectively are (-1, -35), size = 4.5; (19 21), size = 1.0; (-4, 23), size = 2.1; (-23, -4), size = 0.9. The <strong>draw</strong> function creates and draws the <code class="language-plaintext highlighter-rouge">Circle</code> objects for the bubbles:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">draw</span>
  <span class="vi">@data</span><span class="p">[</span><span class="ss">:x_values</span><span class="p">].</span><span class="nf">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">_</span><span class="p">,</span> <span class="n">idx</span><span class="o">|</span>
    <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Artist</span><span class="o">::</span><span class="no">Circle</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>
      <span class="nb">self</span><span class="p">,</span>
      <span class="ss">x: </span><span class="vi">@data</span><span class="p">[</span><span class="ss">:x_values</span><span class="p">][</span><span class="n">idx</span><span class="p">],</span>
      <span class="ss">y: </span><span class="vi">@data</span><span class="p">[</span><span class="ss">:y_values</span><span class="p">][</span><span class="n">idx</span><span class="p">],</span>
      <span class="ss">radius: </span><span class="vi">@data</span><span class="p">[</span><span class="ss">:z_values</span><span class="p">][</span><span class="n">idx</span><span class="p">],</span>
      <span class="ss">fill_opacity: </span><span class="mf">0.5</span><span class="p">,</span>
      <span class="ss">color: </span><span class="vi">@data</span><span class="p">[</span><span class="ss">:color</span><span class="p">],</span>
      <span class="ss">border_width: </span><span class="mi">1</span><span class="p">,</span>
      <span class="ss">abs: </span><span class="kp">false</span>
    <span class="p">).</span><span class="nf">draw</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div> <p>Here, for bubble plot, the border width of the circles is set to 1 pixel. The opacity of the circles is hardcoded to <strong>0.5</strong> for visibility of overlapping bubbles.<br> P.S. - Later, the opacity of the bubble will be taken as an optional input(<code class="language-plaintext highlighter-rouge">fill_opacity</code>) with the default value set to <strong>0.5</strong>.</p> <p>The <strong>draw</strong> function for the <code class="language-plaintext highlighter-rouge">Circle</code> object is:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">draw</span>
  <span class="no">Rubyplot</span><span class="p">.</span><span class="nf">backend</span><span class="p">.</span><span class="nf">draw_circle</span><span class="p">(</span>
    <span class="ss">x: </span><span class="vi">@x</span><span class="p">,</span>
    <span class="ss">y: </span><span class="vi">@y</span><span class="p">,</span>
    <span class="ss">radius: </span><span class="vi">@radius</span><span class="p">,</span>
    <span class="ss">border_type: :solid</span><span class="p">,</span>
    <span class="ss">border_width: </span><span class="vi">@border_width</span><span class="p">,</span>
    <span class="ss">fill_color: </span><span class="vi">@color</span><span class="p">,</span>
    <span class="ss">border_color: </span><span class="vi">@color</span><span class="p">,</span>
    <span class="ss">fill_opacity: </span><span class="vi">@fill_opacity</span>
  <span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div> <p>It calls the backend function <strong>draw_circle</strong> and passes the information about the circle:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">draw_circle</span><span class="p">(</span><span class="n">x</span><span class="p">:,</span> <span class="n">y</span><span class="p">:,</span> <span class="n">radius</span><span class="p">:,</span> <span class="ss">border_type: </span><span class="kp">nil</span><span class="p">,</span> <span class="ss">border_width: </span><span class="mf">1.0</span><span class="p">,</span> <span class="ss">fill_color: </span><span class="kp">nil</span><span class="p">,</span>
  <span class="ss">border_color: :default</span><span class="p">,</span> <span class="ss">fill_opacity: </span><span class="mf">0.0</span><span class="p">)</span>
  <span class="n">within_window</span> <span class="k">do</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">transform_x</span> <span class="ss">x: </span><span class="n">x</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">transform_y</span> <span class="ss">y: </span><span class="n">y</span>

    <span class="vi">@draw</span><span class="p">.</span><span class="nf">stroke_width</span> <span class="n">border_width</span>
    <span class="vi">@draw</span><span class="p">.</span><span class="nf">stroke</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Color</span><span class="o">::</span><span class="no">COLOR_INDEX</span><span class="p">[</span><span class="n">border_color</span><span class="p">]</span>
    <span class="vi">@draw</span><span class="p">.</span><span class="nf">fill</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Color</span><span class="o">::</span><span class="no">COLOR_INDEX</span><span class="p">[</span><span class="n">fill_color</span><span class="p">]</span> <span class="k">if</span> <span class="n">fill_color</span>
    <span class="vi">@draw</span><span class="p">.</span><span class="nf">fill_opacity</span> <span class="n">fill_opacity</span>
    <span class="vi">@draw</span><span class="p">.</span><span class="nf">circle</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">x</span> <span class="o">-</span> <span class="p">(</span><span class="n">radius</span> <span class="o">*</span> <span class="no">NOMINAL_FACTOR_CIRCLE</span><span class="p">),</span><span class="n">y</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div> <p>First the coordinates are transformed, then the properties of the circle are set and finally the <code class="language-plaintext highlighter-rouge">Magick::Draw</code>’s <strong>circle</strong> function is called to draw the circle.<br> Here the radius of the circle is multiplied by a nominal factor in order to match the Magick backend and GR backend sizes. The nominal factor <code class="language-plaintext highlighter-rouge">NOMINAL_FACTOR_CIRCLE</code> is hardcoded to <strong>27.5</strong>.</p> <h1 id="candle-stick-plot">Candle-stick plot</h1> <p>An example of Candle-stick plot with code is:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="vi">@figure</span> <span class="o">=</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Figure</span><span class="p">.</span><span class="nf">new</span>
<span class="n">axes</span> <span class="o">=</span> <span class="vi">@figure</span><span class="p">.</span><span class="nf">add_subplot!</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">candle_stick!</span> <span class="k">do</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">lows</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">110</span><span class="p">]</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">highs</span> <span class="o">=</span> <span class="p">[</span><span class="mi">140</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span> <span class="mi">170</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span> <span class="mi">150</span><span class="p">]</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">opens</span> <span class="o">=</span> <span class="p">[</span><span class="mi">110</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="mi">140</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="mi">120</span><span class="p">]</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">closes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">130</span><span class="p">,</span> <span class="mi">140</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">140</span><span class="p">]</span>
<span class="k">end</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">title</span> <span class="o">=</span> <span class="s2">"Simple candle stick plot."</span>
<span class="vi">@figure</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s1">'candlestickplot.png'</span><span class="p">)</span>
</code></pre></div></div> <p><img src="https://raw.githubusercontent.com/alishdipani/alishdipani.github.io/master/_posts/Resources/Simple_Plots_in_Rubyplot/candlestickplot.png" width="600"></p> <p>The candle-stick plot draws rectangles i.e. bars (candle) with a line (stick) passing through the center of the rectangles parallel to the Y axis.<br> The inputs taken are arrays for lower Y coordinate of the rectangles(<code class="language-plaintext highlighter-rouge">opens</code>) and upper Y coordinate of the rectangles(<code class="language-plaintext highlighter-rouge">closes</code>), arrays for lower Y coordinate of the lines(<code class="language-plaintext highlighter-rouge">lows</code>) and the upper Y coordinate of the lines(<code class="language-plaintext highlighter-rouge">highs</code>), the colour of the rectangles(<code class="language-plaintext highlighter-rouge">color</code>), width of the rectangles(<code class="language-plaintext highlighter-rouge">bar_width</code>), the label of the plot(<code class="language-plaintext highlighter-rouge">label</code>) and the color of the border of the bars(<code class="language-plaintext highlighter-rouge">border_color</code>).</p> <p>The X coordinates of the lower left corner of the bar and the line are stored in <code class="language-plaintext highlighter-rouge">x_left_candle</code> and <code class="language-plaintext highlighter-rouge">x_low_stick</code> respectively. The <strong>draw</strong> function calculates the remaining dimensions (similar to the Bar plot) of the lines and rectangles and creates and draws the <code class="language-plaintext highlighter-rouge">Line2D</code> and <code class="language-plaintext highlighter-rouge">Rectangle</code> objects for lines and rectangles respectively:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">draw</span>
 <span class="vi">@x_low_stick</span><span class="p">.</span><span class="nf">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">ix_stick</span><span class="p">,</span> <span class="n">i</span><span class="o">|</span>
   <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Artist</span><span class="o">::</span><span class="no">Line2D</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>
     <span class="nb">self</span><span class="p">,</span>
     <span class="ss">x: </span><span class="p">[</span><span class="n">ix_stick</span><span class="p">,</span> <span class="n">ix_stick</span><span class="p">],</span>
     <span class="ss">y: </span><span class="p">[</span><span class="vi">@lows</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="vi">@highs</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
   <span class="p">).</span><span class="nf">draw</span>
 <span class="k">end</span>
 
 <span class="vi">@x_left_candle</span><span class="p">.</span><span class="nf">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">ix_candle</span><span class="p">,</span> <span class="n">i</span><span class="o">|</span>
   <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Artist</span><span class="o">::</span><span class="no">Rectangle</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span>
     <span class="nb">self</span><span class="p">,</span>
     <span class="ss">x1: </span><span class="n">ix_candle</span><span class="p">,</span>
     <span class="ss">y1: </span><span class="vi">@opens</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
     <span class="ss">x2: </span><span class="n">ix_candle</span> <span class="o">+</span> <span class="vi">@bar_width</span><span class="p">,</span>
     <span class="ss">y2: </span><span class="vi">@closes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span>
     <span class="ss">border_color: </span><span class="vi">@border_color</span><span class="p">,</span>
     <span class="ss">fill_color: </span><span class="vi">@data</span><span class="p">[</span><span class="ss">:color</span><span class="p">]</span>
   <span class="p">).</span><span class="nf">draw</span>
 <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div> <p>The <code class="language-plaintext highlighter-rouge">x_left_candle</code> and <code class="language-plaintext highlighter-rouge">x_low_stick</code> are calculated using the multi_candle_stick code which will be explained in the next blog.</p> <p>The <code class="language-plaintext highlighter-rouge">Rectangle</code> object is explained previously. For, the line(stick), a <code class="language-plaintext highlighter-rouge">Line2D</code> object is created and drawn with default colour which is black. The <code class="language-plaintext highlighter-rouge">Line2D</code> object is a straight line between two points. The <strong>draw</strong> function for <code class="language-plaintext highlighter-rouge">Line2D</code> is:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">draw</span>
  <span class="no">Rubyplot</span><span class="p">.</span><span class="nf">backend</span><span class="p">.</span><span class="nf">draw_lines</span><span class="p">(</span><span class="ss">x: </span><span class="vi">@x</span><span class="p">,</span> <span class="ss">y: </span><span class="vi">@y</span><span class="p">,</span>
    <span class="ss">width: </span><span class="vi">@width</span><span class="p">,</span> <span class="ss">color: </span><span class="vi">@color</span><span class="p">,</span> <span class="ss">opacity: </span><span class="vi">@opacity</span><span class="p">,</span> <span class="ss">type: </span><span class="vi">@type</span><span class="p">)</span>
<span class="k">end</span>
</code></pre></div></div> <p>This passes the properties of the line to the backend function <strong>draw_lines</strong>, which is:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">draw_lines</span><span class="p">(</span><span class="n">x</span><span class="p">:,</span> <span class="n">y</span><span class="p">:,</span> <span class="ss">width: </span><span class="mf">2.0</span><span class="p">,</span> <span class="ss">type: :default</span><span class="p">,</span> <span class="ss">color: :default</span><span class="p">,</span> <span class="ss">opacity: </span><span class="mf">1.0</span><span class="p">)</span>
  <span class="n">within_window</span> <span class="k">do</span>
    <span class="n">y</span><span class="p">.</span><span class="nf">each_with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">_</span><span class="p">,</span> <span class="n">idx_y</span><span class="o">|</span>
      <span class="k">if</span> <span class="n">idx_y</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">y</span><span class="p">.</span><span class="nf">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">x1</span> <span class="o">=</span> <span class="n">transform_x</span><span class="p">(</span><span class="ss">x: </span><span class="n">x</span><span class="p">[</span><span class="n">idx_y</span><span class="p">],</span> <span class="ss">abs: </span><span class="kp">false</span><span class="p">)</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="n">transform_y</span><span class="p">(</span><span class="ss">y: </span><span class="n">y</span><span class="p">[</span><span class="n">idx_y</span><span class="p">],</span> <span class="ss">abs: </span><span class="kp">false</span><span class="p">)</span>
        <span class="n">x2</span> <span class="o">=</span> <span class="n">transform_x</span><span class="p">(</span><span class="ss">x: </span><span class="n">x</span><span class="p">[</span><span class="n">idx_y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="ss">abs: </span><span class="kp">false</span><span class="p">)</span>
        <span class="n">y2</span> <span class="o">=</span> <span class="n">transform_y</span><span class="p">(</span><span class="ss">y: </span><span class="n">y</span><span class="p">[</span><span class="n">idx_y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">],</span> <span class="ss">abs: </span><span class="kp">false</span><span class="p">)</span>
        <span class="no">LINE_TYPES</span><span class="p">[</span><span class="n">type</span><span class="p">].</span><span class="nf">call</span><span class="p">(</span><span class="vi">@draw</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
      <span class="k">end</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div> <p>It iterates over the array of X values and Y values and draws straight lines between the consecutive points i.e. the current point and the point stored in the next index of the arrays. After transforming the points, based on the line type, the values are passed to a hash of lambdas(just like scatter plot markers) for drawinf the line. The hash is:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">LINE_TYPES</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c1"># Default type is solid</span>
  <span class="ss">default: </span><span class="o">-&gt;</span><span class="p">(</span><span class="n">draw</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">draw</span><span class="p">.</span><span class="nf">fill_opacity</span> <span class="n">opacity</span>
    <span class="n">draw</span><span class="p">.</span><span class="nf">stroke_width</span> <span class="n">width</span>
    <span class="n">draw</span><span class="p">.</span><span class="nf">fill</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Color</span><span class="o">::</span><span class="no">COLOR_INDEX</span><span class="p">[</span><span class="n">color</span><span class="p">]</span>
    <span class="n">draw</span><span class="p">.</span><span class="nf">line</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span>
  <span class="p">},</span>
  <span class="ss">solid: </span><span class="o">-&gt;</span><span class="p">(</span><span class="n">draw</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">draw</span><span class="p">.</span><span class="nf">fill_opacity</span> <span class="n">opacity</span>
    <span class="n">draw</span><span class="p">.</span><span class="nf">stroke_width</span> <span class="n">width</span>
    <span class="n">draw</span><span class="p">.</span><span class="nf">fill</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Color</span><span class="o">::</span><span class="no">COLOR_INDEX</span><span class="p">[</span><span class="n">color</span><span class="p">]</span>
    <span class="n">draw</span><span class="p">.</span><span class="nf">line</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span>
  <span class="p">},</span>
  <span class="ss">dashed: </span><span class="o">-&gt;</span><span class="p">(</span><span class="n">draw</span><span class="p">,</span> <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">raise</span> <span class="no">NotImplementedError</span><span class="p">,</span> <span class="s1">'This line has not yet been implemented'</span>
  <span class="p">}</span>
  <span class="c1"># Rest of the code omitted due to space constraint</span>
<span class="p">}</span>
</code></pre></div></div> <p>Each of these lambdas take the properties of the lines and draw it.</p> <p>The line types available are solid, dashed, dotted, dashed_dotted, dash_2_dot, dash_3_dot, long_dash, long_short_dash, spaced_dash, spaced_dot, double_dot and triple dot. The default type of line is solid.<br> Till now, only solid line type is implemented for Magick backend, rest all will be implemented soon.</p> <p>Hence, the <code class="language-plaintext highlighter-rouge">Rectangle</code> and <code class="language-plaintext highlighter-rouge">Line2D</code> objects are drawn which are the candle and the stick respectively.</p> <h1 id="histogram">Histogram</h1> <p>An example of Histogram with code is:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="vi">@figure</span> <span class="o">=</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Figure</span><span class="p">.</span><span class="nf">new</span>
<span class="n">axes</span> <span class="o">=</span> <span class="vi">@figure</span><span class="p">.</span><span class="nf">add_subplot!</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">histogram!</span> <span class="k">do</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">x</span> <span class="o">=</span> <span class="mi">100</span><span class="p">.</span><span class="nf">times</span><span class="p">.</span><span class="nf">map</span><span class="p">{</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span>
<span class="vi">@figure</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s1">'histogram.png'</span><span class="p">)</span>
</code></pre></div></div> <p><img src="https://raw.githubusercontent.com/alishdipani/alishdipani.github.io/master/_posts/Resources/Simple_Plots_in_Rubyplot/histogram.png" width="600"></p> <p>Histogram draws rectangles(bars) which represent the frequency of a label(i.e. an object, a range of numbers, etc.)<br> The inputs taken are the color of the bars(<code class="language-plaintext highlighter-rouge">color</code>), the label of the plot(<code class="language-plaintext highlighter-rouge">label</code>), width of the bars(<code class="language-plaintext highlighter-rouge">bar_width</code>), an array of numbers as the data(<code class="language-plaintext highlighter-rouge">x</code>), an optional number representing number of bins or an array of increasing numbers representing bins over which the frequency will be calculated(<code class="language-plaintext highlighter-rouge">bins</code>).</p> <p>So, bins can be set in three ways:</p> <ol> <li>If bins are not specified i.e. not given as an input then number of bins are set as number of unique numbers in the data, here in the example(assuming each number from 0 to 9 is present) the number of bins will be 10. The subdivisions(Integer) is calculated which is the difference maximum value and minimum value in data divided by the number of bins. So, here in the example subdivisions = (9-0)/10 = 0.9 = 0 (as subdivisions is an Integer).<br> Then the bins array is set as an array having numbers starting from the minimum value in the data added with subdivisions over and over again until the maximum value in the data and finally the largest unique number added with ubdivisions is appended to the bins array. So, the bins array is [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10] and hence the bins are 0-1, 1-2, 2-3, 3-4, 4-5, 5-6, 6-7, 7-8, 8-9 and 9-10. The bins are inclusive of the starting number.</li> <li>If bins are given as the number of bins i.e. an Integer representing the number of bins then similarly to case 1, the bins are calculated.</li> <li>If bins are given directly i.e. an array is given.<br> Example - [1,4,7,10] then the bins will be [1,4), [4,7), [7,10] i.e. the startig value is included and the ending value is excluded unless it’s the end of values i.e. bins array.</li> </ol> <p>After calculating the bins, the combined frequencies of the bins are calculated which are the heights of the bars for each bin. Hence, the <code class="language-plaintext highlighter-rouge">Rectangle</code> objects are drawn(as explained previously) with each bar representing a bin and the height representing the frequency of the bin.</p> <h1 id="line-plot">Line plot</h1> <p>An example of Line plot with code is:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="vi">@figure</span> <span class="o">=</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Figure</span><span class="p">.</span><span class="nf">new</span>
<span class="n">axes</span> <span class="o">=</span> <span class="vi">@figure</span><span class="p">.</span><span class="nf">add_subplot!</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">line!</span> <span class="k">do</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">data</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">label</span> <span class="o">=</span> <span class="s2">"Marco"</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">color</span> <span class="o">=</span> <span class="ss">:blue</span>
<span class="k">end</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">title</span> <span class="o">=</span> <span class="s2">"A line graph."</span>
<span class="vi">@figure</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s1">'lineplot.png'</span><span class="p">)</span>
</code></pre></div></div> <p><img src="https://raw.githubusercontent.com/alishdipani/alishdipani.github.io/master/_posts/Resources/Simple_Plots_in_Rubyplot/lineplot.png" width="600"></p> <p>The Line plot draws a line between consecutive points specified by the user and thus draws a line passing through the points taken as input.<br> The input taken by the Line plot are type of the line(<code class="language-plaintext highlighter-rouge">line_type</code>), width of the line(<code class="language-plaintext highlighter-rouge">line_width</code>), the color of the line(<code class="language-plaintext highlighter-rouge">line_color</code>) and the data having a compulsory array having Y coordinate values for the points and an optional array having X coordinate values(<code class="language-plaintext highlighter-rouge">data</code>) and the label of the plot(<code class="language-plaintext highlighter-rouge">label</code>).</p> <p>If only one array is given to the line plot as the data then the X coordinate values are calculated as 0,1,2…(number of Y - 1) values. This is similar to the Area plot.</p> <p>The <strong>draw</strong> function calls the <strong>draw_lines</strong> backend function to create the lines, which is as explained before and hence the Line plot is drawn.</p> <h1 id="error-bar-plot">Error-bar plot</h1> <p>An example of Error-bar plot with code is:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="vi">@figure</span> <span class="o">=</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Figure</span><span class="p">.</span><span class="nf">new</span>
<span class="n">axes</span> <span class="o">=</span> <span class="vi">@figure</span><span class="p">.</span><span class="nf">add_subplot!</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">title</span> <span class="o">=</span> <span class="s2">"Simple error bar plot with collection xerr and yerr."</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">error_bar!</span> <span class="k">do</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">data</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">16</span><span class="p">]</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">xerr</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span><span class="mf">1.5</span><span class="p">,</span><span class="mf">0.3</span><span class="p">]</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">yerr</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.6</span><span class="p">,</span><span class="mf">0.2</span><span class="p">,</span><span class="mf">0.8</span><span class="p">,</span><span class="mf">0.1</span><span class="p">]</span>
<span class="k">end</span>
<span class="vi">@figure</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s1">'errorbarplot.png'</span><span class="p">)</span>
</code></pre></div></div> <p><img src="https://raw.githubusercontent.com/alishdipani/alishdipani.github.io/master/_posts/Resources/Simple_Plots_in_Rubyplot/errorbarplot.png" width="600"></p> <p>Error-bar plot draws a line plot for the data taken and draws lines for errors at the given points.<br> The inputs taken are two arrays for X coordinate values and Y coordinate values respectively(<code class="language-plaintext highlighter-rouge">data</code>), label of the plot(<code class="language-plaintext highlighter-rouge">label</code>), colour of the line and the error lines(<code class="language-plaintext highlighter-rouge">color</code>), an array for X error values(<code class="language-plaintext highlighter-rouge">xerr</code>) and an array for Y error values(<code class="language-plaintext highlighter-rouge">yerr</code>).</p> <p>The line and the errors are all <code class="language-plaintext highlighter-rouge">Line2D</code> objects which are explained previously. The coordinates for the error lines are calculated by adding and subtraicting the error to the coordinates i.e. suppose at the first point (1,1) the X error is 0.5 then the X error line will be between the points (0.5,1) and (0.5,1) and similarly the Y error is 0.6 then the Y error line is between the points (1,0.4) and (1,1.6).</p> <h1 id="box-plot">Box plot</h1> <p>An example of Box plot with code is:</p> <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">figure</span> <span class="o">=</span> <span class="no">Rubyplot</span><span class="o">::</span><span class="no">Figure</span><span class="p">.</span><span class="nf">new</span>
<span class="n">axes</span> <span class="o">=</span> <span class="vi">@figure</span><span class="p">.</span><span class="nf">add_subplot!</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">title</span> <span class="o">=</span> <span class="s2">"A simple box plot."</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">box_plot!</span> <span class="k">do</span> <span class="o">|</span><span class="nb">p</span><span class="o">|</span>
  <span class="nb">p</span><span class="p">.</span><span class="nf">data</span> <span class="p">[</span>
    <span class="p">[</span><span class="mi">60</span><span class="p">,</span><span class="mi">70</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">70</span><span class="p">,</span><span class="mi">50</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">100</span><span class="p">,</span><span class="mi">40</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">70</span><span class="p">],</span>
    <span class="p">[</span><span class="mi">30</span><span class="p">,</span> <span class="mi">10</span><span class="p">]</span>
  <span class="p">]</span>
<span class="k">end</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">x_title</span> <span class="o">=</span> <span class="s2">"foo"</span>
<span class="n">axes</span><span class="p">.</span><span class="nf">y_title</span> <span class="o">=</span> <span class="s2">"bar"</span>
<span class="vi">@figure</span><span class="p">.</span><span class="nf">write</span><span class="p">(</span><span class="s1">'boxplot.png'</span><span class="p">)</span>
</code></pre></div></div> <p><img src="https://raw.githubusercontent.com/alishdipani/alishdipani.github.io/master/_posts/Resources/Simple_Plots_in_Rubyplot/boxplot.png" width="600"></p> <p>The box plot will be explained in the next blog in the multi box plot section.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/gsoc2019/2019/08/22/Wrapping-up-GSoC-2019/">Wrapping up GSoC 2019</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/gsoc2019/2019/08/22/IRuby-integration-and-ticks/">IRuby integration and ticks</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/gsoc2019/2019/07/26/The-show-and-the-plot-functions/">The show and the plot functions</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/gsoc2019/2019/07/13/Multi-plots-in-Rubyplot/">Multi plots in Rubyplot</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/gsoc2019/2019/06/10/The-Scatter-plot-example/">The Scatter plot example</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Alish Dipani. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-2TPX3E1SKE"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-2TPX3E1SKE");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-home",title:"Home",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-journals",title:"Journals",description:"",section:"Navigation",handler:()=>{window.location.href="/journals/"}},{id:"nav-conferences",title:"Conferences",description:"",section:"Navigation",handler:()=>{window.location.href="/conferences/"}},{id:"nav-teaching",title:"Teaching",description:"",section:"Navigation",handler:()=>{window.location.href="/teaching/"}},{id:"nav-awards",title:"Awards",description:"",section:"Navigation",handler:()=>{window.location.href="/awards/"}},{id:"nav-service",title:"Service",description:"",section:"Navigation",handler:()=>{window.location.href="/service/"}},{id:"nav-blog",title:"Blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"dropdown-invited-talks",title:"Invited Talks",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"dropdown-experience",title:"Experience",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"dropdown-open-source",title:"Open-source",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"post-wrapping-up-gsoc-2019",title:"Wrapping up GSoC 2019",description:"",section:"Posts",handler:()=>{window.location.href="/gsoc2019/2019/08/22/Wrapping-up-GSoC-2019/"}},{id:"post-iruby-integration-and-ticks",title:"IRuby integration and ticks",description:"",section:"Posts",handler:()=>{window.location.href="/gsoc2019/2019/08/22/IRuby-integration-and-ticks/"}},{id:"post-the-show-and-the-plot-functions",title:"The show and the plot functions",description:"",section:"Posts",handler:()=>{window.location.href="/gsoc2019/2019/07/26/The-show-and-the-plot-functions/"}},{id:"post-multi-plots-in-rubyplot",title:"Multi plots in Rubyplot",description:"",section:"Posts",handler:()=>{window.location.href="/gsoc2019/2019/07/13/Multi-plots-in-Rubyplot/"}},{id:"post-simple-plots-in-rubyplot",title:"Simple Plots in Rubyplot",description:"",section:"Posts",handler:()=>{window.location.href="/gsoc2019/2019/06/28/Simple-Plots-in-Rubyplot/"}},{id:"post-the-scatter-plot-example",title:"The Scatter plot example",description:"",section:"Posts",handler:()=>{window.location.href="/gsoc2019/2019/06/10/The-Scatter-plot-example/"}},{id:"post-rubyplot-installation-guide",title:"Rubyplot installation guide",description:"",section:"Posts",handler:()=>{window.location.href="/gsoc2019/2019/06/09/Rubyplot-installation-guide/"}},{id:"post-gsoc-2019-project-introduction",title:"GSoC 2019 project introduction",description:"",section:"Posts",handler:()=>{window.location.href="/gsoc2019/2019/06/08/GSoC-2019-project-introduction/"}},{id:"post-neural-style-transfer-on-audio-signals",title:"Neural Style Transfer on Audio Signals",description:"",section:"Posts",handler:()=>{window.location.href="/projects/2018/08/Neural-Style-Transfer-Audio/"}},{id:"news-i-will-be-a-lead-ta-for-the-neuroai-https-neuroai-neuromatch-io-tutorials-intro-html-neuromatch-academy",title:"I will be a Lead TA for the [NeuroAI](https://neuroai.neuromatch.io/tutorials/intro.html) Neuromatch Academy",description:"",section:"News"},{id:"news-i-created-a-tutorial-on-normalization-https-neuroai-neuromatch-io-tutorials-w1d5-microcircuits-student-w1d5-tutorial2-html-for-the-neuroai-https-neuroai-neuromatch-io-tutorials-intro-html-neuromatch-academy",title:"I created a tutorial on [Normalization](https://neuroai.neuromatch.io/tutorials/W1D5_Microcircuits/student/W1D5_Tutorial2.html) for the [NeuroAI](https://neuroai.neuromatch.io/tutorials/intro.html) Neuromatch Academy",description:"",section:"News"},{id:"news-our-commentary-paper-quot-linking-faces-to-social-cognition-the-temporal-pole-as-a-potential-social-switch-https-www-pnas-org-doi-abs-10-1073-pnas-2411735121-quot-has-been-published-in-pnas",title:"Our commentary paper &quot;[Linking faces to social cognition: The temporal pole as a...",description:"",section:"News"},{id:"news-i-will-be-giving-a-talk-at-sinha-lab-department-of-brain-amp-cognitive-sciences-mit-usa",title:"I will be giving a talk at Sinha Lab, Department of Brain &amp;...",description:"",section:"News"},{id:"news-i-will-be-joining-the-psychology-phd-program-at-georgiatech-as-a-coco-fellow-https-coco-psych-gatech-edu",title:"I will be joining the Psychology PhD program at GeorgiaTech as a [CoCo...",description:"",section:"News"},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%61%6C%69%73%68.%64%69%70%61%6E%69@%67%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-google-scholar",title:"Google Scholar",section:"Socials",handler:()=>{window.open("https://scholar.google.com/citations?user=i028n20AAAAJ","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/alishdipani","_blank")}},{id:"socials-x",title:"X",description:"Twitter",section:"Socials",handler:()=>{window.open("https://twitter.com/alishdipani","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>